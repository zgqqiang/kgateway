kind: BackendConfigPolicy
apiVersion: gateway.kgateway.dev/v1alpha1
metadata:
  name: backend-tls-policy
  namespace: nginx
spec:
  targetRefs:
  - group: gateway.kgateway.dev
    kind: Backend
    name: nginx-backend-mtls
  tls:
    secretRef:
      name: nginx-tls
    sni: "nginx.nginx"
---
# See nginx-mtls-config.yml for the instructions to generate the certs
apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: nginx-tls
  namespace: nginx
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURZVENDQWttZ0F3SUJBZ0lVUXFrSDBpSjUweUlBTC96aTd2RnlWSEhtNUVFd0RRWUpLb1pJaHZjTkFRRUwKQlFBd096RVpNQmNHQTFVRUF3d1FhMmRoZEdWM1lYa3RjbTl2ZEMxallURVJNQThHQTFVRUNnd0lhMmRoZEdWMwpZWGt4Q3pBSkJnTlZCQVlUQWxWVE1CNFhEVEkxTURneU9ERXlOREV3T0ZvWERUTTFNRGd5TmpFeU5ERXdPRm93Ck96RVpNQmNHQTFVRUF3d1FhMmRoZEdWM1lYa3RjbTl2ZEMxallURVJNQThHQTFVRUNnd0lhMmRoZEdWM1lYa3gKQ3pBSkJnTlZCQVlUQWxWVE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBcy9YSAp0R1RFTmt4WDJLcVNBbVk1a21yRW4xd0JMZ1BDUVc1NndEb3dqdUxRc0dPU0NlSHM2MDJLMUx2UlNkV0dYTXgvCnBMSVJReGZRRXJWQ1BGQkNDS3B4SVpzdjBlTmVnUHVpTFA1Z1lveXBBeHMrQUkzdXJveVZCTjEwZFlncGFHRkIKdEVQQ0c5UTh2UlE5Vk5JaXNlSG02Y3N4bU9ZNE12Q3BJL0R4c3BJZTFRMEtORFovdDFiTkpNRmJlZnRDc3VBdQpxUjFpS3crU1pvc3Y5czhjMFo4Mm5xVFE3OVk0cFU3QnJ3cUR2bTQ5M09HQmNTSUFEdUxJVlNXVGdEbmJ1aHpXCnlDam4xejlaNzh4UGplVVVjUG5pR2hrcnhhdC80K3RzUmtGbzhpb3M0YWJkWmlOdmJ2bDNZNVVYUEtIZTNESjkKY25ldnJVQXB6ZklhNVdCVG13SURBUUFCbzEwd1d6QU1CZ05WSFJNRUJUQURBUUgvTUFzR0ExVWREd1FFQXdJQgpCakFkQmdOVkhRNEVGZ1FVRFZ0Yi9Sa0tadVdmWFlxNHQ0RGRaeitwYnUwd0h3WURWUjBqQkJnd0ZvQVVEVnRiCi9Sa0tadVdmWFlxNHQ0RGRaeitwYnUwd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFJcnorT0t5bFFWQ1Y1RUgKUlQzWi9JblNmWWZ3ckN5dGdwaGIxQ2lPNWNPSGF6Y2ErWks5ai9Hd3dyWEM4NXhPTTJ5bElTZmJRWlZiNUZpNQpxWDNzbzU5NVlNWmVXeHN1dC9zOEtrczk2dTZLRkJNaDIrd1YzbDZGRXhzNWxXNFhiWHU2dGxZeVFwTXZaQVZmCjNVUmRoU292VXBZWkZqYTBKK0x5WGRXa1pRb3ZORjYrU0dIQXRSbTFBRHBHQ0EzcGM4M2RPbzlwbnFlVUI0aTMKSTE2UW5Felp0UGFLOEMxNGhQZElNdkRvSWxoTmNQd3lGdGl0d052U1czVUdpcGJwQURmaXlDMkR2RHNLckM1NwpoMkIzemxKRWIrZGdMbmJYZWhDc0NrYTQrZndkZStVa2cvWFE1djVkVUV3bkhSRm1QSG5iWVFyRVlpTTkzNDJ4CnpidUVXckk9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURaekNDQWsrZ0F3SUJBZ0lVYUl6eHRrTUk4b3U4ZFJaRThFZzgwVlpaOWlBd0RRWUpLb1pJaHZjTkFRRUwKQlFBd096RVpNQmNHQTFVRUF3d1FhMmRoZEdWM1lYa3RjbTl2ZEMxallURVJNQThHQTFVRUNnd0lhMmRoZEdWMwpZWGt4Q3pBSkJnTlZCQVlUQWxWVE1CNFhEVEkxTURneU9ERXlOREl3TWxvWERUSTJNRGd5T0RFeU5ESXdNbG93Ck9qRVlNQllHQTFVRUF3d1BhMmRoZEdWM1lYa3RZMnhwWlc1ME1SRXdEd1lEVlFRS0RBaHJaMkYwWlhkaGVURUwKTUFrR0ExVUVCaE1DVlZNd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURQR09BUAplWHdzMDZtV1JTZ3Z6cTM4cnBsOW1mbGpidnZ5SnFTRmE1K0E5Q3lIQ3pwSm9qRURhVzBrd1BOMGtFd3p6ZWYvCkdCaURQbEFUazZKRnhjdk8zYXFQUVBTcnI1SUxYaUNabVFualhRUGxBc0JjdVl4aVU2R1VWT2QzR3hlYlNSQisKVk5Zc1h0SlFmcWZYQVVGU09TRU9EcitYOS8rc2pwSmdWKzljd25nSjBUbmpGdzBxYU01YUtqSUxwOFFYQ0ZQbwp3NVBMMi9vc29uejQzaGg2NWhXYnA1VDBUcTJXVHRwS1NNWEZPOWZJRFZPSm9ReVg1eVo5Z0x2SjRFT3dSL0h4Cm5WUmRob0Frclp3aUpSMDNTYkZ1RndyRkQ0WnN0S2E2ZURCZlN5TFAyRDlCU0tnQzZJS1BsejZTSE5BVWM5MmcKVnNRc1pYOXMvUlJRK01ESEFnTUJBQUdqWkRCaU1Bc0dBMVVkRHdRRUF3SUZvREFUQmdOVkhTVUVEREFLQmdncgpCZ0VGQlFjREFqQWRCZ05WSFE0RUZnUVVHU2hySW5mN0h0UjBvOWJsWkFJbE1XTVZzZEl3SHdZRFZSMGpCQmd3CkZvQVVEVnRiL1JrS1p1V2ZYWXE0dDREZFp6K3BidTB3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUczZ3llWWIKcmZGSkkvWll6WnkvSWtGYXlTbERmbEViV09zN3FYR0xnK0w5eTV6THBkRjNDMHZ6MlRSMU9ZSFhqWFo1UlJYawoxWEY2WVEvc2wyN0J0SW5XTC9WY2dnK3FDSUQyNU8wSnM5enhzWSs5cFkwTmNlREdoZnJJZkM1REhXd0IzYlV2Clp2Z1FvY0l4RlFabGUyZzhNNjdmUGRjQXVybUUvb1JYSmxjWlBRelJWM0N4WWp4MHJZeXd3TVd3RkNSc2Y4angKS0hyWnhHRWk2QUtoL1A0clJJL1VmRnpOM1FzM1c5ZWlOcG1OcFB6Ri9vSUoxbFZRdXByNVN4cEo4S1p1cnU3dgpNZDJHejBNNUVGazhCTmpBNlU3d2lmdTVzWUF4bldSOStmR0JHUEwvV3Q2azdCSlp6dy9JS2FEaFJLRDJMdndFClYybmlxMit1ODR1citlOD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRRFBHT0FQZVh3czA2bVcKUlNndnpxMzhycGw5bWZsamJ2dnlKcVNGYTUrQTlDeUhDenBKb2pFRGFXMGt3UE4wa0V3enplZi9HQmlEUGxBVAprNkpGeGN2TzNhcVBRUFNycjVJTFhpQ1ptUW5qWFFQbEFzQmN1WXhpVTZHVVZPZDNHeGViU1JCK1ZOWXNYdEpRCmZxZlhBVUZTT1NFT0RyK1g5LytzanBKZ1YrOWN3bmdKMFRuakZ3MHFhTTVhS2pJTHA4UVhDRlBvdzVQTDIvb3MKb256NDNoaDY1aFdicDVUMFRxMldUdHBLU01YRk85ZklEVk9Kb1F5WDV5WjlnTHZKNEVPd1IvSHhuVlJkaG9BawpyWndpSlIwM1NiRnVGd3JGRDRac3RLYTZlREJmU3lMUDJEOUJTS2dDNklLUGx6NlNITkFVYzkyZ1ZzUXNaWDlzCi9SUlErTURIQWdNQkFBRUNnZ0VBRERBcGw1K051RkdvckdoYmloeSt6cDB6K1ZsamZQK2VJazAxNTRoQzllTG8KNy9Xd00zOHhKVU5DSWlTYzcySkNxZFhYYm9McmhtWFhicCtFc0ZpSXV4NytsN201N0pURG9wbWlqNGViTmw5VwpDRmRXSE43cXJTckEycXI0aUdEMnpiUEtIYlUrZVpRSENxZTVsd1RDNUdUcVZocDJHaXFGU0pHSGVkWVRCMEZyCmNxK0h5SVZkQkx3YnY4bEx0MGRQMEFwQ2NMWkZzclhobmpOaUtTWjJqSmhxNng1RmRGME4zMWU2KzRhTGV2aEcKcXp1ZkZUT3hZalZNeUsvWXh6bWZ3UDRMN2RGRk9na24vQm01Tm5UcDRDVzFQNWhkcTdoQzdnbm8wV1pkbWRrTAoydE1jbUZzT3VKNmxvRTFkclRJMXp6OS91c05JNU8rS1dWalVxK3V6ZVFLQmdRRC9CYVNWZFdqelVuZzgvdVd5Cnllejh4dE1tWjkxeVJIWTJSZjFvckp6RVljelZEaG81M2E2UjdUNnBXRmdLVis5bFhnRE91MHR0dzJOZ0N2NVUKK1loWWdVb2tMQVdWb2pvVEpCNjc3ZC9uK1lPUVNURVJ0S0lqVGFrTnYvSGZWWVdBdlZBa09TMHBDSXh4KytlRQpUaHJRazZ3aVdrbm9hSU9FRlQ5NnJ0Sm44d0tCZ1FEUDVDOGlJcHBKT2ltL3doTjdDWUtPQXB6ejljenl6YmJaCjNXcyttN3A2bHlTUlhBYUR1NWd4cTNxaHNnNEFqYU5yV0U3ZTRybk45aDdTbUNyVE1pWjQ2ajRPMDRTUGREQVYKVG4vSjB4ZVdlVFNNTHZJNzlsam10L3FkbXF1Tk9XSjk2R01icWhTRmtmOUNYQ0lGNUxRMWJ3bkdKREw2cmlaawpyeE5KUmJ2czNRS0JnUUNoTnhvQ2VjU3MvWmVSUjdwQnVqRWM0endjYlZDcXFlanBDbm5XTURpeVZQaytQcm9KCmxzQ0M4NjNITkZnRHdlOU83NHduSkhQY29jWXlzd0J4QzRaTUhQK1h1bFNWY1lheER3WjIyenZPMUFkOXNTZGEKQUF6M3NHS01sS2o4L0gxM0V6YVVqNmlpNWdxVERDSWhtNWFNQUs2eTBNMGtKTjN2STllTFlQVVdUUUtCZ1FDagpMOGNmMEhHejBZZzhFaWdnaUpLR3p0NU5Va0VTeHhBbGJIMW1vKzk1azNNTTkyUFZ2RWYzbFZlcDNZN0lPR1p6Ck9OcVFjd0RPLzhlcUgvQmQ0QnY3QmtTNGRxaXp3c3lMclJiNllrMDl2TjdXdTNOQ1JsbjZvYWlFVm9rYlRsUlYKNlRrQzJqdEpyaFRsRGxWV3N2UVNqWnJxZ2pmU055bkVGdm5ZcG5paHNRS0JnUURzTEZxVE1saHBLb0U0aXFWaQpBYW52VklSbmtjOEJFZHc3Z2I4RkRLd1NxV3JwVkVmMXJqQThWbmRFS3J1aXhLRXB1U09DRERFb25PS3A0azVhCllSTFU0cXdpTHpHOWxDVzgwcXhmbEdMbk0zdldyMzN1RjBuS0FPbC9pVjFiY0VlR2JMLzd3OURURHR4M2haMi8KWWEweWRTenlSK1lYT0YrNDBueFZBVGk3U3c9PQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==